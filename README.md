# 💾 磁盘迁移工具 Pro

> 一款专业的Windows磁盘空间管理工具，支持智能扫描、批量迁移、符号链接创建

---

## ✨ 核心功能

- 🚀 **闪电扫描** - 多线程智能扫描，根据CPU核心数自动优化
- 📊 **智能分析** - 磁盘使用情况分析，智能推荐可移动文件夹
- 📁 **批量操作** - 一次选择多个文件夹，批量移动
- 🔗 **符号链接** - 移动后创建符号链接，程序无缝兼容
- ↶ **一键撤销** - 误操作也不怕，轻松恢复
- 💾 **智能缓存** - 24小时缓存系统，避免重复扫描
- 🎨 **现代界面** - 毛玻璃效果，深色主题，操作流畅

---

## 📥 下载安装

### 方式一：下载exe文件（推荐）

**最新版本下载**：[DiskMigrationToolPro.exe](../../releases/latest)

下载后双击即可运行，**无需安装任何环境！**

- ✅ 单文件，绿色免安装
- ✅ 无需安装Python
- ✅ 无需安装依赖库
- ✅ 约26MB大小

### 方式二：运行源代码（开发者）

```bash
# 克隆仓库
git clone https://github.com/你的用户名/disk-migration-tool.git
cd disk-migration-tool

# 安装依赖
pip install -r requirements.txt

# 运行程序
python main.py
```

**环境要求**：Python 3.8+ | Windows 10/11

---

## ⚠️ 下载后被拦截？看这里！

**重要提示**：杀毒软件可能会误报，**这不是病毒，请放心使用！**

### 🛡️ Windows Defender 提示拦截

**如果提示"Windows已保护你的电脑"：**

1. 点击"**更多信息**"
2. 点击"**仍要运行**"
3. 完成！程序就能运行了

**如果文件被自动删除：**

1. 打开"**Windows安全中心**"（搜索栏输入）
2. 点击"**病毒和威胁防护**"
3. 点击"**保护历史记录**"
4. 找到被删除的文件，点击"**操作**" → "**允许**"
5. 或者：点击"**管理设置**" → 滚动到"**排除项**" → "**添加或删除排除项**" → 添加exe文件

### 🔐 360/腾讯管家 拦截

**360安全卫士：**
1. 打开360 → "**病毒查杀**"
2. 点击右上角"**信任区**"
3. 添加 `DiskMigrationToolPro.exe`

**腾讯电脑管家：**
1. 打开管家 → "**病毒查杀**"
2. 点击"**信任区**" → "**添加信任**"
3. 选择exe文件

### ✅ 为什么会误报？

- 程序使用PyInstaller打包，**没有数字签名**
- **所有源代码开源可查**，绝无恶意行为
- 程序只扫描磁盘、移动文件，不联网、不上传数据

---

## 🚀 快速上手

### 第一步：启动程序

- **exe版本**：双击 `DiskMigrationToolPro.exe`
- **源码版本**：运行 `python main.py`

💡 **建议**：右键选择"以管理员身份运行"以获得完整功能

### 第二步：自动扫描

程序启动后会自动快速扫描C盘，显示：
- 所有磁盘驱动器
- C盘可移动的文件夹
- 磁盘使用情况统计

### 第三步：选择文件夹

在中间的文件夹列表中：
- ✅ 勾选想要移动的文件夹
- 📂 点击"▶"展开查看子文件夹
- 🔍 查看文件夹大小，合理选择

### 第四步：选择目标盘

在右侧控制面板：
- 从下拉菜单选择目标磁盘
- ✅ 保持"创建符号链接"勾选（推荐）
- 查看已选择文件的统计信息

### 第五步：批量移动

- 点击 **"🚀 批量移动"** 按钮
- 确认移动操作
- 在日志面板查看进度
- ✅ 完成！文件已安全移动

---

## 📖 使用指南

### 扫描模式对比

| 模式 | 速度 | 准确度 | 适用场景 |
|------|------|--------|---------|
| **快速扫描** | ⚡ 2-5秒 | 85%+ | 日常使用，快速预览 |
| **深度扫描** | 🐢 1-3分钟 | 99%+ | 全面分析，精确统计 |

**什么时候用深度扫描：**
- 首次使用时
- 需要精确的文件统计
- 寻找所有可移动内容

**什么时候用快速扫描：**
- 日常维护检查
- 快速查看空间情况
- 已经知道要移动什么

### 符号链接详解

**什么是符号链接？**

符号链接（目录联接）就像"智能快捷方式"，它能：
- 让程序自动跳转到新的文件位置
- 让程序以为文件还在原来的地方
- 完全透明，软件无需任何修改

**举个例子：**
```
原位置: C:\游戏\我的游戏 → 移动到: D:\游戏\我的游戏
符号链接: C:\游戏\我的游戏 → 指向 → D:\游戏\我的游戏
结果: 游戏启动器照常工作，完全不受影响！
```

**什么时候需要创建符号链接：**

✅ **强烈推荐：**
- 游戏文件夹（Steam、Epic等）
- 软件安装目录
- 程序数据文件夹
- 任何有快捷方式或启动器的文件夹

⚠️ **可选：**
- 文档、照片、视频
- 纯数据文件夹
- 手动访问的文件夹

🚫 **不需要：**
- 系统文件夹（已自动保护）
- Windows安装目录

### 快捷键操作

快捷键让你效率翻倍：

- `Ctrl+A` - 全选所有文件夹
- `Ctrl+D` - 取消全选
- `F5` - 刷新扫描
- `Ctrl+Z` - 撤销上一次移动
- `Esc` - 清除当前选择

### 界面说明

**左侧面板 - 磁盘概览：**
- 显示所有驱动器和使用情况
- 点击磁盘卡片可分析该磁盘
- 绿色=空间充足，红色=空间不足

**中间面板 - 文件夹列表：**
- 按大小排序的可移动文件夹
- ⚠️ 系统文件夹已自动隐藏（受保护）
- 点击▶展开查看子文件夹
- 支持多级展开

**右侧面板 - 控制中心：**
- 选择目标磁盘
- 开关符号链接功能
- 查看操作日志
- 执行批量移动

---

## ⚠️ 安全性与权限

### 内置安全保护

✅ **自动保护机制：**
- 系统文件夹自动隐藏，无法移动
- 移动前必须确认操作
- 所有操作记录时间戳日志
- 完整的撤销历史记录

✅ **智能检测：**
- 自动识别Windows系统目录
- 警告受保护的文件夹
- 移动前检查目标盘空间

### 管理员权限

**为什么需要管理员权限？**

某些文件夹需要提升权限才能访问：
- Program Files 文件夹
- ProgramData 文件夹
- 系统保护的目录

**如何以管理员身份运行：**
1. 右键点击 `DiskMigrationToolPro.exe`
2. 选择"以管理员身份运行"
3. 在UAC提示中点击"是"

💡 **注意**：工具可以在普通权限下运行，但某些文件夹可能无法访问。

---

## 🛠️ 常见问题

### 程序无法启动

**问题**：双击没反应或显示错误

**解决方案：**
1. 尝试以管理员身份运行
2. 检查Windows Defender或杀毒软件
   - 可能将其标记为未知应用
   - 如确认安全，添加到排除列表
3. 确认Windows版本（需要Win 10/11）
4. 检查是否安装了Visual C++运行库

### "访问被拒绝"错误

**问题**：无法扫描或移动某些文件夹

**解决方案：**
- ✅ 以管理员身份运行程序
- ✅ 检查Windows中的文件夹权限
- ✅ 确保你拥有文件所有权（非系统所有）

### 扫描速度太慢

**问题**：深度扫描运行超过10分钟

**解决方案：**
- 改用快速扫描模式
- 检查硬盘健康状况
- 关闭占用磁盘的后台程序
- 考虑升级到固态硬盘（SSD）

### 移动操作失败

**问题**：文件没有移动或出现错误

**常见原因：**
1. **空间不足** - 检查目标盘容量
2. **文件占用** - 关闭正在使用这些文件的程序
3. **写保护** - 移除目标盘的写保护
4. **权限不足** - 以管理员身份运行

**查看日志面板**可以看到具体的错误信息。

### 无法撤销操作

**问题**：撤销按钮不工作

**解决方案：**
- 检查程序文件夹中是否有 `move_history.json`
- 确认原始位置仍然存在
- 以管理员身份运行（某些操作需要）

### 杀毒软件拦截

**问题**：杀毒软件删除或隔离了exe文件

**为什么会这样：**
- PyInstaller打包的程序有时会被误报
- 没有代码签名证书（假阳性）

**解决方案：**
1. 从隔离区恢复文件
2. 添加到杀毒软件排除列表
3. 或者直接运行Python源代码版本

---

## 💡 使用技巧

### 移动文件前

1. ✅ **备份重要数据** - 养成备份的好习惯
2. ✅ **关闭所有程序** - 特别是使用这些文件夹的程序
3. ✅ **检查目标盘空间** - 确保有足够空间
4. ✅ **先测试小文件夹** - 熟悉操作流程

### 适合移动的内容

**✅ 推荐移动：**
- 游戏安装文件夹（50-100GB+）
- 视频剪辑项目
- 下载的安装包
- 旧的备份文件
- 媒体库（电影、音乐）

**⚠️ 小心处理：**
- Program Files文件夹（必须用符号链接！）
- 云同步文件夹（OneDrive、Dropbox）
- 数据库文件（可能需要更新路径）

**❌ 禁止移动：**
- Windows文件夹
- Program Files（不用符号链接的情况下）
- 用户配置文件夹
- 启动相关目录

### 移动后检查

1. ✅ 测试相关程序 - 启动并验证功能正常
2. ✅ 检查快捷方式 - 如有损坏需要更新
3. ✅ 观察几天 - 确保系统稳定
4. ✅ 保留移动历史 - 不要删除 `move_history.json`

---

## 📊 技术规格

### 系统要求

**最低配置：**
- Windows 10（64位）或更高版本
- 2GB 内存
- 50MB 磁盘空间
- 双核处理器

**推荐配置：**
- Windows 11（64位）
- 8GB 内存
- 固态硬盘（SSD）
- 四核或更好的处理器

### 性能指标

**扫描速度：**
- 快速扫描：2-5秒（50GB磁盘）
- 深度扫描：1-3分钟（100GB磁盘）
- 缓存加载：< 1秒（使用缓存）

**内存占用：**
- 空闲状态：~50MB
- 扫描过程：~150MB
- 移动文件：~200MB

**多线程：**
- 根据CPU核心数自动调整
- 计算公式：CPU核心数 × 2（最少8线程）
- 示例：8核CPU = 16个工作线程

---

## 🔄 版本历史

### v1.0（当前版本）- 2025年11月

**首次发布：**
- ✅ 多线程扫描引擎
- ✅ 快速/深度扫描模式
- ✅ 批量文件移动
- ✅ 符号链接创建
- ✅ 一键撤销功能
- ✅ 智能缓存系统（24小时）
- ✅ 现代化毛玻璃UI
- ✅ 键盘快捷键支持
- ✅ 多级文件夹展开

---

## 💖 赞助支持

如果这个工具帮到了你，节省了你的时间和磁盘空间，欢迎请我喝杯咖啡 ☕

<div align="center">

### 微信赞赏 | 支付宝打赏

<table>
  <tr>
    <td align="center">
      <img src="wechat.jpg" width="200" alt="微信收款码"/><br/>
      <b>微信扫一扫</b>
    </td>
    <td align="center">
      <img src="apliy.jpg" width="200" alt="支付宝收款码"/><br/>
      <b>支付宝扫一扫</b>
    </td>
  </tr>
</table>

**你的支持是我持续更新的动力！** 🚀

</div>

---

## 🤝 反馈与支持

### 发现Bug？

请在 [GitHub Issues](../../issues) 报告问题，并提供：
- 问题描述
- 复现步骤
- 截图（如适用）
- 系统信息（Windows版本等）

### 功能建议

有好想法？在 [GitHub Discussions](../../discussions) 分享吧！

### 联系方式

- 📧 邮箱：your.email@example.com
- 🐛 问题反馈：[GitHub Issues](../../issues)
- 💬 交流讨论：[GitHub Discussions](../../discussions)

---

## 📄 许可证

本项目仅供**个人学习和使用**。

**免责声明**：本软件会移动你系统中的文件。虽然我们实现了多重安全措施，但使用前请务必备份重要数据。作者不对数据丢失负责。

---

## 🙏 致谢

**使用的开源项目：**
- [CustomTkinter](https://github.com/TomSchimansky/CustomTkinter) - 现代化UI框架
- [psutil](https://github.com/giampaolo/psutil) - 系统信息获取
- [matplotlib](https://matplotlib.org/) - 数据可视化

---

## 📚 常见问答

**Q: 这个工具安全吗？**  
A: 安全！工具包含自动系统文件夹保护、操作确认和完整的撤销功能。

**Q: 移动后的程序还能用吗？**  
A: 能用！只要使用符号链接（默认开启且推荐）。

**Q: 可以在不同盘符间移动吗？**  
A: 可以，支持任意盘符间移动。

**Q: 撤销后会怎样？**  
A: 文件移回原位置，符号链接被删除。

**Q: 支持外置硬盘吗？**  
A: 支持，可作为源盘或目标盘。

**Q: 能把文件移回C盘吗？**  
A: 可以，选择C盘作为目标即可。

**Q: 数据会上传到云端吗？**  
A: 不会！所有操作都在本地完成，无需联网。

**Q: 为什么Windows Defender报警？**  
A: PyInstaller打包的程序有时会被误报为未知应用，这是假阳性。如有疑虑，可以运行Python源代码版本。

---

**用 ❤️ 为被C盘空间困扰的Windows用户打造**

*版本 1.0 | 最后更新：2025年11月*
