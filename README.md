# 💾 磁盘迁移工具 Pro v2.0

<div align="center">

**专业的Windows磁盘空间管理与文件迁移工具**  
智能扫描 · 批量迁移 · 符号链接 · 树形展示 · 实时搜索

[![Windows](https://img.shields.io/badge/Windows-10%20%7C%2011-blue?logo=windows)](https://www.microsoft.com/windows)
[![Python](https://img.shields.io/badge/Python-3.8%2B-brightgreen?logo=python)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-Personal%20Use-orange)](LICENSE)
[![Version](https://img.shields.io/badge/Version-2.0-success)](https://github.com)

</div>

---

## 🎉 v2.0 重大更新

### 🌲 树形文件夹显示
- 类似Windows资源管理器的树形结构
- 点击▶展开查看子文件夹
- 支持无限层级浏览

### 🔍 智能搜索功能
- 实时模糊搜索，输入即显示
- 支持文件夹名称、路径、首字母缩写
- 搜索结果高亮显示

### ⚡ 性能优化
- 首次深度扫描提速2倍（10分钟→5分钟）
- 二次扫描提速20倍（10分钟→30秒）
- UI展开响应提速50倍（5秒→0.1秒）
- 内存占用降低50%（200MB→100MB）

### 🔐 系统级访问
- 启用Windows备份权限（SeBackupPrivilege）
- 可扫描系统保护文件夹，覆盖率达99%
- 自动识别SSD/HDD/NVMe，智能优化

---

## ✨ 核心功能

### 🚀 智能扫描
- **快速扫描**：2-5秒完成，适合日常使用
- **深度扫描**：完整遍历所有子文件夹，精确统计
- **智能缓存**：24小时缓存，mtime检测自动失效
- **磁盘自适应**：NVMe 32线程，SSD 16线程，HDD 2线程

### 📁 批量迁移
- **一键移动**：选择多个文件夹，批量迁移
- **符号链接**：自动创建junction，程序无感知
- **进度显示**：实时显示复制进度，支持大文件
- **一键撤销**：完整操作历史，随时恢复

### 🎨 现代界面
- **毛玻璃UI**：深色主题，视觉舒适
- **动画效果**：平滑过渡，体验流畅
- **实时日志**：操作状态实时可见

---

## 📥 快速开始

### 💿 方式一：下载可执行文件（推荐）

1. 下载 [最新版本](../../releases/latest) 的 `DiskMigrationToolPro.zip`
2. 解压到任意文件夹
3. 双击 `DiskMigrationToolPro.exe` 运行
4. 建议右键"以管理员身份运行"获得完整权限

### 🐍 方式二：运行Python源码

```bash
# 克隆项目
git clone https://github.com/yourusername/disk-migration-tool.git
cd disk-migration-tool

# 安装依赖
pip install -r requirements.txt

# 启动程序
python main.py
```

**系统要求**：Windows 10/11 (64位) · Python 3.8+

---

## 🛡️ 安全说明

**杀毒软件误报？**这是正常的！

- ✅ 所有源代码完全开源，可自行审查
- ✅ 程序不联网，不上传任何数据
- ✅ PyInstaller打包导致的假阳性

**解决方法：**
1. Windows Defender：点击"更多信息" → "仍要运行"
2. 其他杀毒软件：添加到信任列表即可

---

## 🚀 快速上手

### 使用流程

1. **启动程序**：右键"以管理员身份运行"（推荐）
2. **扫描磁盘**：程序自动快速扫描，或点击"深度扫描"
3. **选择文件夹**：勾选要移动的文件夹，可点击▶展开查看子文件夹
4. **搜索功能**：在搜索框输入关键词，实时筛选文件夹
5. **选择目标盘**：从下拉菜单选择目标磁盘
6. **批量移动**：点击"批量移动"按钮，确认操作
7. **查看进度**：在日志面板查看详细进度
8. **完成**：移动完成，符号链接已自动创建

---

## 📖 功能说明

### 扫描模式

| 模式 | 速度 | 适用场景 |
|------|------|----------|
| **快速扫描** | 2-5秒 | 日常使用，快速预览 |
| **深度扫描** | 5分钟（首次）<br/>30秒（缓存） | 完整分析，精确统计 |

### 符号链接

符号链接（Junction）是"智能快捷方式"：
```
C:\游戏\我的游戏 → 移动到 D:\游戏\我的游戏
C:\游戏\我的游戏 → 指向 → D:\游戏\我的游戏
结果：游戏启动器正常工作，无需修改！
```

**推荐使用场景：**
- ✅ 游戏文件夹（Steam、Epic等）
- ✅ 软件安装目录
- ✅ 程序数据文件夹

### 快捷键

- `Ctrl+A` - 全选
- `Ctrl+D` - 取消全选
- `F5` - 刷新扫描
- `Ctrl+Z` - 撤销移动
- `Esc` - 清除选择

---

## ⚠️ 安全说明

### 内置保护机制

✅ 系统文件夹自动隐藏，无法误操作  
✅ 移动前二次确认  
✅ 完整的撤销历史  
✅ 所有操作有日志记录

### 管理员权限

**为什么需要：**
- 访问系统保护文件夹
- 启用Windows备份权限
- 扫描所有磁盘文件

**如何启用：**
右键exe → "以管理员身份运行" → 点击"是"

---

## 🛠️ 常见问题

**Q: 杀毒软件报毒怎么办？**  
A: 这是误报。PyInstaller打包导致，代码完全开源可审查。添加到信任列表即可。

**Q: 扫描很慢？**  
A: 首次深度扫描需5-10分钟建立缓存，之后仅需30秒。日常使用快速扫描即可。

**Q: 移动后程序无法启动？**  
A: 确保勾选了"创建符号链接"选项。

**Q: 如何撤销移动？**  
A: 点击菜单栏"撤销上次移动"或按`Ctrl+Z`。

**Q: 无法访问某些文件夹？**  
A: 以管理员身份运行程序，启用备份权限。

**Q: 数据安全吗？**  
A: 所有操作有确认步骤，支持完整撤销。建议移动前备份重要数据。

---

## 💡 使用建议

### 推荐移动的内容
- ✅ 游戏文件夹（50-100GB+）
- ✅ 视频、照片、音乐
- ✅ 下载的安装包
- ✅ 旧的备份文件

### 需谨慎的内容
- ⚠️ Program Files（必须用符号链接）
- ⚠️ 云同步文件夹
- ⚠️ 数据库文件

### 禁止移动
- ❌ Windows系统文件夹
- ❌ 用户配置文件夹

### 移动后检查
1. 测试相关程序是否正常
2. 检查快捷方式
3. 观察系统稳定性

---

## 📊 性能数据

### 系统要求
- Windows 10/11 (64位)
- 2GB+ 内存
- 50MB 磁盘空间

### 实测性能（8核CPU，NVMe SSD）
- 快速扫描：2-5秒
- 深度扫描（首次）：5分钟
- 深度扫描（缓存）：30秒
- 内存占用：100MB
- 线程数：自适应（NVMe 32线程，SSD 16线程，HDD 2线程）

---

## 🔄 版本历史

### v2.0 - 2025-11-02
- 🌲 树形文件夹显示
- 🔍 智能搜索功能
- ⚡ 性能提升2-50倍
- 🔐 Windows备份权限
- 🎨 完整动画系统

### v1.0 - 2025-11-01
- ✅ 多线程扫描引擎
- ✅ 批量文件移动
- ✅ 符号链接创建
- ✅ 智能缓存系统

---

## 💖 支持项目

如果这个工具帮到了你，欢迎Star⭐本项目！

<div align="center">

### 微信赞赏 | 支付宝打赏

<table>
  <tr>
    <td align="center">
      <img src="wechat.jpg" width="200" alt="微信收款码"/><br/>
      <b>微信扫一扫</b>
    </td>
    <td align="center">
      <img src="apliy.jpg" width="200" alt="支付宝收款码"/><br/>
      <b>支付宝扫一扫</b>
    </td>
  </tr>
</table>

**你的支持是最大的动力！** 🚀

</div>

---

## 🤝 反馈支持

- 🐛 Bug反馈：[GitHub Issues](../../issues)
- 💬 功能建议：[GitHub Discussions](../../discussions)
- 📧 邮箱：your.email@example.com

---

## 📄 许可协议

本项目仅供**个人学习和使用**。

**免责声明**：使用前请务必备份重要数据，作者不对数据丢失负责。

---

## 🙏 致谢

感谢以下开源项目：
- [CustomTkinter](https://github.com/TomSchimansky/CustomTkinter) - UI框架
- [psutil](https://github.com/giampaolo/psutil) - 系统信息

---

**用 ❤️ 为被C盘空间困扰的Windows用户打造**

*版本 2.0 | 最后更新：2025年11月2日*
